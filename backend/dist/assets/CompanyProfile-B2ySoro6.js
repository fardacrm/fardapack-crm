import{_ as C,r,o as B,c as o,a as f,t as s,d as l,w as p,e as _,S as c,f as i,u as m,g as h,n as y,v as g,F as b,h as k,j as D,k as N,l as u}from"./index-BYi8rqoe.js";const P={class:"page-content"},S={key:0,class:"loading-message"},V={key:1,class:"error-detail"},$={key:2},T={class:"profile-header"},F={class:"info-grid"},I={class:"info-item"},j={class:"info-item"},z={class:"info-item"},E={class:"info-item"},J={class:"info-item-full"},L={class:"info-item-full"},M={class:"tabs"},R={class:"tab-content"},q={key:0},A={key:1},G={class:"tab-content"},H={key:0},K={key:1},O={class:"tab-content"},Q={key:0},U={key:1},W={__name:"CompanyProfile",setup(X){const w=D(),e=r(null),v=r(!0),d=r(null),a=r("users");return B(async()=>{v.value=!0,d.value=null;const x=w.params.id;try{const t=await N.get(`/companies/${x}/profile`);e.value=t.data}catch(t){d.value=t.message||"خطا در واکشی پروفایل"}finally{v.value=!1}}),(x,t)=>(u(),o("div",P,[v.value?(u(),o("div",S,"در حال بارگذاری اطلاعات شرکت...")):f("",!0),d.value?(u(),o("div",V,s(d.value),1)):f("",!0),e.value?(u(),o("div",$,[l("div",T,[l("h2",null,"پروفایل شرکت: "+s(e.value.info.name),1),_(c,{text:e.value.info.status},null,8,["text"])]),l("div",F,[l("div",I,[t[3]||(t[3]=l("strong",null,"تلفن:",-1)),i(" "+s(e.value.info.phone||"—"),1)]),l("div",j,[t[4]||(t[4]=l("strong",null,"سطح:",-1)),i(" "+s(e.value.info.level),1)]),l("div",z,[t[5]||(t[5]=l("strong",null,"تاریخ ایجاد:",-1)),i(" "+s(m(h)(e.value.info.created_at)),1)]),l("div",E,[t[6]||(t[6]=l("strong",null,"کارشناسان مرتبط:",-1)),i(" "+s(e.value.info.experts||"—"),1)])]),l("div",J,[t[7]||(t[7]=l("strong",null,"آدرس:",-1)),i(" "+s(e.value.info.address||"—"),1)]),l("div",L,[t[8]||(t[8]=l("strong",null,"یادداشت:",-1)),i(" "+s(e.value.info.note||"—"),1)]),l("div",M,[l("button",{onClick:t[0]||(t[0]=n=>a.value="users"),class:y({active:a.value==="users"})}," کاربران ("+s(e.value.users.length)+") ",3),l("button",{onClick:t[1]||(t[1]=n=>a.value="calls"),class:y({active:a.value==="calls"})}," تماس‌ها ("+s(e.value.calls.length)+") ",3),l("button",{onClick:t[2]||(t[2]=n=>a.value="followups"),class:y({active:a.value==="followups"})}," پیگیری‌ها ("+s(e.value.followups.length)+") ",3)]),p(l("div",R,[t[10]||(t[10]=l("h3",null,"کاربران مرتبط با این شرکت",-1)),e.value.users.length>0?(u(),o("table",q,[t[9]||(t[9]=l("thead",null,[l("tr",null,[l("th",null,"نام کامل"),l("th",null,"تلفن"),l("th",null,"سمت")])],-1)),l("tbody",null,[(u(!0),o(b,null,k(e.value.users,n=>(u(),o("tr",{key:n.id},[l("td",null,s(n.full_name),1),l("td",null,s(n.phone),1),l("td",null,s(n.role),1)]))),128))])])):(u(),o("p",A,"هیچ کاربری برای این شرکت ثبت نشده است."))],512),[[g,a.value==="users"]]),p(l("div",G,[t[12]||(t[12]=l("h3",null,"تاریخچه تماس‌ها",-1)),e.value.calls.length>0?(u(),o("table",H,[t[11]||(t[11]=l("thead",null,[l("tr",null,[l("th",null,"تاریخ"),l("th",null,"وضعیت"),l("th",null,"توضیحات")])],-1)),l("tbody",null,[(u(!0),o(b,null,k(e.value.calls,n=>(u(),o("tr",{key:n.id},[l("td",null,s(m(h)(n.call_datetime)),1),l("td",null,[_(c,{text:n.status},null,8,["text"])]),l("td",null,s(n.description),1)]))),128))])])):(u(),o("p",K,"هیچ تماسی ثبت نشده است."))],512),[[g,a.value==="calls"]]),p(l("div",O,[t[14]||(t[14]=l("h3",null,"تاریخچه پیگیری‌ها",-1)),e.value.followups.length>0?(u(),o("table",Q,[t[13]||(t[13]=l("thead",null,[l("tr",null,[l("th",null,"عنوان"),l("th",null,"تاریخ"),l("th",null,"وضعیت"),l("th",null,"جزئیات")])],-1)),l("tbody",null,[(u(!0),o(b,null,k(e.value.followups,n=>(u(),o("tr",{key:n.id},[l("td",null,s(n.title),1),l("td",null,s(m(h)(n.due_date)),1),l("td",null,[_(c,{text:n.status},null,8,["text"])]),l("td",null,s(n.details),1)]))),128))])])):(u(),o("p",U,"هیچ پیگیری ثبت نشده است."))],512),[[g,a.value==="followups"]])])):f("",!0)]))}},ll=C(W,[["__scopeId","data-v-4805968f"]]);export{ll as default};
