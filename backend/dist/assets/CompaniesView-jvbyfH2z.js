import{_ as A,r as u,o as L,c as m,d as e,t as x,m as P,w as _,p as D,q as T,l as v,s as H,b as E,a as y,e as C,x as J,A as K,v as Q,F as I,h as W,T as X,k as $,y as Z,u as z,z as B,S as M}from"./index-DNgNiQ0R.js";const ee={class:"modal-box"},te={class:"form-grid"},le={class:"input-group"},ae={class:"input-group"},se={class:"input-group-full"},ne={class:"form-grid"},oe={class:"input-group"},ue={class:"input-group"},ie={__name:"CompanyFormModal",props:{initialData:{type:Object,default:null}},emits:["close","save"],setup(U,{emit:S}){const d=U,k=u(!1),n=u({name:"",phone:"",address:"",note:"",level:"Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù…",status:"Ø¨Ø¯ÙˆÙ† ÙˆØ¶Ø¹ÛŒØª"});L(()=>{d.initialData&&(k.value=!0,n.value={name:d.initialData.Ù†Ø§Ù…_Ø´Ø±Ú©Øª,phone:d.initialData.ØªÙ„ÙÙ†,address:d.initialData.address||"",note:d.initialData.note||"",level:d.initialData.Ø³Ø·Ø­_Ø´Ø±Ú©Øª||"Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù…",status:d.initialData.ÙˆØ¶Ø¹ÛŒØª_Ø´Ø±Ú©Øª||"Ø¨Ø¯ÙˆÙ† ÙˆØ¶Ø¹ÛŒØª"})});const p=S,r=()=>{p("close")},g=()=>{p("save",n.value,k.value?d.initialData.ID:null)};return(V,l)=>(v(),m("div",{class:"modal-overlay",onClick:P(r,["self"])},[e("div",ee,[e("h2",null,x(k.value?"ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø±Ú©Øª":"Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø±Ú©Øª Ø¬Ø¯ÛŒØ¯"),1),e("form",{onSubmit:P(g,["prevent"])},[e("div",te,[e("div",le,[l[5]||(l[5]=e("label",{for:"name"},"Ù†Ø§Ù… Ø´Ø±Ú©Øª *",-1)),_(e("input",{id:"name","onUpdate:modelValue":l[0]||(l[0]=o=>n.value.name=o),type:"text",required:""},null,512),[[D,n.value.name]])]),e("div",ae,[l[6]||(l[6]=e("label",{for:"phone"},"ØªÙ„ÙÙ†",-1)),_(e("input",{id:"phone","onUpdate:modelValue":l[1]||(l[1]=o=>n.value.phone=o),type:"tel"},null,512),[[D,n.value.phone]])])]),e("div",se,[l[7]||(l[7]=e("label",{for:"address"},"Ø¢Ø¯Ø±Ø³",-1)),_(e("input",{id:"address","onUpdate:modelValue":l[2]||(l[2]=o=>n.value.address=o),type:"text"},null,512),[[D,n.value.address]])]),e("div",ne,[e("div",oe,[l[9]||(l[9]=e("label",{for:"status"},"ÙˆØ¶Ø¹ÛŒØª",-1)),_(e("select",{id:"status","onUpdate:modelValue":l[3]||(l[3]=o=>n.value.status=o)},[...l[8]||(l[8]=[e("option",null,"Ø¨Ø¯ÙˆÙ† ÙˆØ¶Ø¹ÛŒØª",-1),e("option",null,"Ø¯Ø± Ø­Ø§Ù„ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ",-1),e("option",null,"Ù¾ÛŒØ´ ÙØ§Ú©ØªÙˆØ±",-1),e("option",null,"Ù…Ø´ØªØ±ÛŒ Ø´Ø¯",-1)])],512),[[T,n.value.status]])]),e("div",ue,[l[11]||(l[11]=e("label",{for:"level"},"Ø³Ø·Ø­",-1)),_(e("select",{id:"level","onUpdate:modelValue":l[4]||(l[4]=o=>n.value.level=o)},[...l[10]||(l[10]=[e("option",null,"Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù…",-1),e("option",null,"Ø·Ù„Ø§ÛŒÛŒ",-1),e("option",null,"Ù†Ù‚Ø±Ù‡â€ŒØ§ÛŒ",-1),e("option",null,"Ø¨Ø±Ù†Ø²",-1)])],512),[[T,n.value.level]])])]),e("div",{class:"modal-actions"},[e("button",{type:"button",class:"btn-cancel",onClick:r},"Ù„ØºÙˆ"),l[12]||(l[12]=e("button",{type:"submit",class:"btn-save"},"Ø°Ø®ÛŒØ±Ù‡",-1))])],32)])]))}},de=A(ie,[["__scopeId","data-v-69362cf0"]]),re={class:"page-content"},ve={class:"page-header"},pe={class:"filter-item"},ce={class:"filter-item"},me={class:"filter-item"},fe={key:0,class:"loading-message"},_e={key:1,class:"success-message"},ge={key:2},be={class:"name-cell"},ye={class:"context-menu"},Ce=["onClick"],ke=["onClick"],xe={key:4,class:"loading-message"},Ve={__name:"CompaniesView",setup(U){const S=Z(),d=["Ø¨Ø¯ÙˆÙ† ÙˆØ¶Ø¹ÛŒØª","Ø¯Ø± Ø­Ø§Ù„ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ","Ù¾ÛŒØ´ ÙØ§Ú©ØªÙˆØ±","Ù…Ø´ØªØ±ÛŒ Ø´Ø¯"],k=["Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù…","Ø·Ù„Ø§ÛŒÛŒ","Ù†Ù‚Ø±Ù‡â€ŒØ§ÛŒ","Ø¨Ø±Ù†Ø²"],n=u([]),p=u(!0),r=u(null),g=u(!1),V=u(!1),l=u(null),o=u(0),b=u(20),f=u(1),i=u({q_name:"",f_status:[],f_level:[]}),N=H(()=>{if(b.value==="all")return n.value;const s=parseInt(b.value),t=(f.value-1)*s,a=t+s;return n.value.slice(t,a)}),R=s=>{b.value=s==="all"?"all":parseInt(s),f.value=1},O=s=>{const t=parseInt(b.value),a=Math.ceil(o.value/t);s>=1&&s<=a&&(f.value=s)},q=(s=null)=>{l.value=s,V.value=!0},F=()=>{V.value=!1,l.value=null},j=async(s,t)=>{r.value=null,g.value=!1;const a={...s};try{t?await $.put(`/companies/${t}`,a):await $.post("/companies",a),g.value=!0,F(),h(),setTimeout(()=>{g.value=!1},3e3)}catch(c){c.response&&c.response.data&&c.response.data.detail?r.value=c.response.data.detail:r.value="Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø±Ú©Øª.",console.error("Error saving company:",c)}},h=async()=>{p.value=!0,r.value=null;const s=new URLSearchParams;i.value.q_name&&s.append("q_name",i.value.q_name),i.value.f_status.forEach(t=>{s.append("f_status",t)}),i.value.f_level.forEach(t=>{s.append("f_level",t)});try{const t=await $.get("/companies",{params:s}),a=t.data.data||t.data;n.value=a,o.value=a.length;const c=parseInt(b.value),w=Math.ceil(o.value/c);f.value>w&&(f.value=w>0?w:1)}catch(t){r.value=t.message||"Ø®Ø·Ø§ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³"}finally{p.value=!1}},G=()=>{i.value={q_name:"",f_status:[],f_level:[]},f.value=1,h()},Y=s=>{S.push({name:"company-profile",params:{id:s}})};return L(h),(s,t)=>(v(),m(I,null,[e("div",re,[e("div",ve,[t[4]||(t[4]=e("h2",null,"ğŸ¢ Ù„ÛŒØ³Øª Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§",-1)),e("button",{onClick:t[0]||(t[0]=a=>q()),class:"add-new-button"},"+ Ø§ÙØ²ÙˆØ¯Ù† Ø´Ø±Ú©Øª Ø¬Ø¯ÛŒØ¯")]),C(K,{onFilter:h,onReset:G},{inputs:J(()=>[e("div",pe,[t[5]||(t[5]=e("span",{class:"icon"},"ğŸ¢",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>i.value.q_name=a),type:"text",placeholder:"Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†Ø§Ù… Ø´Ø±Ú©Øª..."},null,512),[[D,i.value.q_name]])]),e("div",ce,[t[6]||(t[6]=e("span",{class:"icon"},"ğŸ“Š",-1)),C(z(B),{modelValue:i.value.f_status,"onUpdate:modelValue":t[2]||(t[2]=a=>i.value.f_status=a),mode:"tags",placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§",options:d,"close-on-select":!1,class:"multiselect-filter"},null,8,["modelValue"])]),e("div",me,[t[7]||(t[7]=e("span",{class:"icon"},"ğŸŒŸ",-1)),C(z(B),{modelValue:i.value.f_level,"onUpdate:modelValue":t[3]||(t[3]=a=>i.value.f_level=a),mode:"tags",placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø·Ø­â€ŒÙ‡Ø§",options:k,"close-on-select":!1,class:"multiselect-filter"},null,8,["modelValue"])])]),_:1}),p.value?(v(),m("div",fe,"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§...")):y("",!0),_(e("div",{class:"error-detail"},"Ø®Ø·Ø§: "+x(r.value),513),[[Q,r.value]]),g.value?(v(),m("div",_e,"Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!")):y("",!0),n.value.length>0&&!p.value?(v(),m("table",ge,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",null,"Ù†Ø§Ù… Ø´Ø±Ú©Øª"),e("th",null,"ØªÙ„ÙÙ†"),e("th",null,"ÙˆØ¶Ø¹ÛŒØª"),e("th",null,"Ø³Ø·Ø­"),e("th",null,"Ú©Ø§Ø±Ø´Ù†Ø§Ø³"),e("th",null,"Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø¨Ø§Ø²")])],-1)),e("tbody",null,[(v(!0),m(I,null,W(N.value,a=>(v(),m("tr",{key:a.ID},[e("td",be,[e("span",null,x(a.Ù†Ø§Ù…_Ø´Ø±Ú©Øª),1),e("div",ye,[e("button",{onClick:c=>Y(a.ID)},"ğŸ‘ Ù†Ù…Ø§ÛŒØ´ Ù¾Ø±ÙˆÙØ§ÛŒÙ„",8,Ce),e("button",{onClick:c=>q(a)},"âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´",8,ke)])]),e("td",null,x(a.ØªÙ„ÙÙ†),1),e("td",null,[C(M,{text:a.ÙˆØ¶Ø¹ÛŒØª_Ø´Ø±Ú©Øª},null,8,["text"])]),e("td",null,[C(M,{text:a.Ø³Ø·Ø­_Ø´Ø±Ú©Øª},null,8,["text"])]),e("td",null,x(a.Ú©Ø§Ø±Ø´Ù†Ø§Ø³_ÙØ±ÙˆØ´),1),e("td",null,[C(M,{text:a.Ù¾ÛŒÚ¯ÛŒØ±ÛŒ_Ø¨Ø§Ø²_Ø¯Ø§Ø±Ø¯},null,8,["text"])])]))),128))])])):y("",!0),!p.value&&o.value>0?(v(),E(X,{key:3,"total-records":o.value,"page-size":b.value,"current-page":f.value,"onUpdate:pageSize":R,onGoToPage:O},null,8,["total-records","page-size","current-page"])):y("",!0),n.value.length===0&&!p.value?(v(),m("p",xe," Ø´Ø±Ú©ØªÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯. ")):y("",!0)]),V.value?(v(),E(de,{key:0,initialData:l.value,onClose:F,onSave:j},null,8,["initialData"])):y("",!0)],64))}},De=A(Ve,[["__scopeId","data-v-696be498"]]);export{De as default};
